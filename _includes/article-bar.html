{% assign navurl = page.url | remove: 'index.html' %}

{% for my_page in include.nav %}
{% if my_page.subitems and navurl contains my_page.url %}

<collapse-bar id="article-col" class="article-col">

  <div style="margin-top: 38px;"></div>
  <div class="article-bar">
    <h3 class="padding">{{ my_page.menu }}</h3>
    <p class="padding">{{ my_page.desc }}</p>

    <ul data-uk-sticky="{top:71,media: '(min-width: 640px)'  }" style="z-index:10" class="article-nav uk-nav">

      {% capture itemUrl %}/{{include.board}}{{my_page.url}}{% endcapture %}

      <li class="{% if navurl == itemUrl %}uk-active{% endif %}">
        <a href="{{site.baseurl}}/{{include.board}}{{ my_page.url }}">Intro</a>
      </li>

      {% if navurl == my_page.url and page.contents %}

      <ul class="uk-nav">
        {% for content in page.contents %}
        <li><a href="#{{content.url}}" du-smooth-scroll>{{ content.name }}</a></li>
        {% endfor %}
      </ul>

      {% endif %}

      {% for subitem in my_page.subitems %}

      {% capture subitemUrl %}/{{include.board}}{{subitem.url}}{% endcapture %}

      <li class="{% if navurl == subitemUrl %}uk-active{% endif %}{% if subitem.group %}article-group{% endif %}">
        <a {% if subitem.url %}href="{{site.baseurl}}/{{include.board}}{{ subitem.url }}"{% endif %}>{{ subitem.menu }}</a>

        {% if subitem.group %}
        <ul>
          {% for group in subitem.group %}
          
          {% capture groupUrl %}/{{include.board}}{{group.url}}{% endcapture %}

          <li class="{% if navurl == groupUrl %}uk-active{% endif %}">
            <a href="{{groupUrl}}">{{group.menu}}</a>
          </li>

          {% endfor %}
        </ul>
        
        {% endif %}
      </li>

      {% endfor %}
    </ul>
  </div>
</collapse-bar>

{% endif %}
{% endfor %}